Документация к программе «Цифровая подпись документов»

1. Общее описание

Программа предназначена для обеспечения целостности и авторства электронных документов.
 Она позволяет создавать уникальную цифровую подпись для любого файла, используя алгоритм асимметричного шифрования RSA.

Отличительной особенностью является привязка подписи к метаданным пользователя: Стране, Городу
 и Названию организации. Если при проверке файла будут указаны другие данные, подпись будет признана недействительной.


 2. Технические требования

 Язык программирования: Python 3.x
 Библиотеки: `cryptography` — для реализации алгоритмов RSA и хеширования.
 `tkinter` — для графического интерфейса.
 `json`, `datetime`, `os` — стандартные библиотеки Python.


3. Как работает программа (Логика)

Процесс разделен на три ключевых этапа:

А. Генерация ключей

Программа создает два файла:

1. Закрытый ключ (`private_key.pem`): Используется для создания подписи. Должен храниться в секрете.
2. Открытый ключ (`public_key.pem`): Используется для проверки подписи. Его можно передавать 
    другим людям вместе с подписанным файлом.

Б. Процесс подписания

1. Программа считывает содержимое выбранного файла.
2. К содержимому файла добавляется «соль» в виде JSON-строки с вашими данными (Страна, Город, Организация).
3. Создается хеш (уникальный отпечаток) этой комбинации по алгоритму SHA-256.
4. Хеш шифруется закрытым ключом. Результат сохраняется в файл с расширением `.sig`.

В. Процесс проверки и отчетности

1. Программа заново собирает файл + введенные в GUI метаданные.
2. Используя открытый ключ, программа проверяет, соответствует ли подпись этому набору данных.
3. Автоматический отчет: Результат (успех или провал) вместе с меткой времени 
записывается в файл `verification_report.txt`.


4. Инструкция пользователя

Шаг 1: Подготовка (Ключи)

При первом запуске нажмите кнопку «1. Сгенерировать ключи». В папке с программой появятся два файла ключей.

> Важно: Не удаляйте их, иначе не сможете проверить файлы, подписанные ранее.

 Шаг 2: Ввод данных

Заполните текстовые поля:

Страна (например: Россия)
Город (например: Москва)
Название организации (например: ООО Технолаб)

 Шаг 3: Подписание файла

1. Нажмите «2. Подписать файл».
2. Выберите нужный документ (например, `contract.docx`).
3. Программа создаст файл подписи `contract.docx.sig`. 
Теперь этот файл и оригинал документа — это неразрывная пара.

Шаг 4: Проверка подлинности

1. Нажмите «3. Проверить и создать отчет»
2. Сначала выберите исходный файл, затем — файл подписи `.sig`.
3. Если данные в полях GUI (Страна/Город) совпадают с теми, 
что были при подписании, и файл не менялся — вы увидите сообщение «ПОДПИСЬ ВЕРНА».


5. Структура отчета (`verification_report.txt`)

Каждая проверка фиксируется в журнале. Пример записи:

text
 Отчет от 2026-02-15 21:05:12
Файл: my_report.pdf
Организация: НИУ ВШЭ
Местоположение: Москва, Россия
РЕЗУЛЬТАТ: УСПЕШНО (Подпись подлинная)
==============================

6. Меры безопасности

Хранение закрытого ключа: Если злоумышленник получит доступ к `private_key.pem`,
 он сможет подписывать документы от вашего имени. Держите его на флешке или в зашифрованном хранилище.
Изменение метаданных: Помните, что подпись чувствительна к регистру. «Москва» и «москва» — это разные 
данные для алгоритма.



Рекомендации по эксплуатации:
Принцип «Золотой копии»: Никогда не редактируйте файл после того, как создали 
для него подпись. Если правки необходимы — подпишите файл заново, создав новую версию подписи.

Архивация отчетов: Рекомендуется периодически копировать файл verification_report.txt в архив,
 так как при очень большом количестве проверок он может стать объемным.

Безопасность ключей: Если вы подозреваете, что файл private_key.pem был скопирован посторонним
 лицом, немедленно сгенерируйте новую пару ключей и переподпишите важные документы.


